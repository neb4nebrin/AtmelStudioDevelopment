# まずは試してみましょう。

[ソフトウェアの準備][PrepSoftware]と[ハードウェアの準備][PrepHardware]が終わったら、まずは試してみましょう。

`IDE`を起動して、以下の様にメニューから**新規プロジェクトを作成**を選択します。

![新規プロジェクト作成メニュー位置](images/NewProjectMenu.png)

すると、以下の様な**新規プロジェクト作成ダイアログ**が表示されます。

![新規プロジェクト作成：初期状態](images/NewProject1.png)

左のペインから、**Installed**の**Assembler**を選択します。

![新規プロジェクト作成：Assembler選択](images/NewProject2.png)

下のペインの**Name**にプロジェクト名（とソリューション名）として、**BlinkAsm**と入力します。ソリューション名**Solution name**は、**Name**を入力した名前と同じ名前が、自動的に設定されますので、入力は不要です。

![新規プロジェクト作成：プロジェクト名指定](images/NewProject3.png)

同じペインの**Location**を確認します。作成したソリューションは、この**Location**フォルダー配下に作成されます。デフォルトで問題はありませんが、今後ソリューションが増えてくると、乱雑になって管理も大変になるので、分かり易いサブフォルダー等を指定しておくのも良いでしょう。

![新規プロジェクト作成：ソリューション格納先指定](images/NewProject4.png)

これで**OK**ボタンを押します。**デバイス選択ダイアログ**が表示されます。

![デバイス選択ダイアログ：初期状態](images/DeviceSelect1.png)

上のペインの**Device Family**プルダウンメニューから、**ATmega**を選択します。

![デバイス選択ダイアログ：ATmega選択](images/DeviceSelect2.png)

下のペインの一覧をスクロールして、**ATmega328P**を選択します。*ATmega328*とか、*ATmega328PB*という似た様な名前もありますが、間違えないで下さい。

![デバイス選択ダイアログ：ATmega328P選択](images/DeviceSelect3.png)

これで**OK**ボタンを押します。ソリューションとプロジェクトが作成されます。遅いPCをお使いの場合は、少し時間がかかるかもしれません。作成が終わると、`IDE`が以下の様になります。

![プロジェクト：初期状態](images/NewProject5.png)

コードを書き始める前に、先に環境をチェックしておきます。最初に以下のメニューを選択して、**プロジェクトのプロパティ**を開きます。

![プロジェクトのプロパティメニュー位置](images/NewProject6.png)

プロパティが表示されました。

![プロジェクトのプロパティ：初期状態](images/NewProject7.png)

プロパティウィンドウの左のペインから、**Tool**を選択します。

![プロジェクトのプロパティ：Tool](images/NewProject8.png)

プロパティウィンドウの右のペインの**Selected debugger/programmer**で、**Simulator**を選択します。`MCU`にいきなり書き込む前に、まずは`Simulator`でテストする為です。

![プロジェクトのプロパティ：Simulator指定](images/NewProject9.png)

プロパティの変更を保存して、プロパティウィンドウを閉じます。

![プロジェクトのプロパティ：保存](images/NewProject10.png)

![プロジェクトのプロパティ：タブを閉じる](images/NewProject11.png)

コードエディターウィンドウに戻ります。このままの状態でアセンブルして実行しても、動作はしますが、実行内容は**R16レジスタをインクリメントするだけの無限ループ**です。初めての××系では、最初は大抵**Hello World!**か**Lチカ**が主流みたいなので、どちらにしようか悩んだのですが、ここは**Lチカ**で行きたいと思います。

**Lチカ**も、`Arduino`だと`delay()`が使えて、n秒間隔の点滅などは簡単に記述出来るのですが、アセンブリ言語だと**そのようなライブラリは無い**ので、自分で１から記述する事になります。加えて割り込みやタイマーも、まだ[一連の本記事][BackToToc]では学習していないので、原始的で力技ですが待機する命令サイクル数（ステップ数とかクロック数とか言う人も居ます）を**自分で計算して**コードを記述する羽目になります。まぁ習っていないのだから仕方ありません、我慢です。

結果、出来上がったコードは次の様になります。これをコードエディターで入力します。**\;**で始まる行は、コメント行ですので、入力しなくても構いませんが、後で見返した時に困るので、ちゃんと書く事をお勧めします。


# コードを仕上げましょう！！！


2018/11/03
***
目次は[こちら][BackToToc]

[BackToToc]: ../toc.md "目次に戻る"
[PrepSoftware]: ./Software.md "ソフトウェアの準備"
[PrepHardware]: ./Hardware.md "ハードウェアの準備"
